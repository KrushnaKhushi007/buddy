#!/usr/bin/env node

var program = require('commander'),
	Builder = require('../lib/builder');

program
	.version('0.3.0')
	.option('-c, --compress', 'compress output for production deployment')
	.option('-b, --bare', 'exclude module wrapping for use with node.js');
 
program
	.command('compile [config]')
	.description('compile js and css sources')
	.action(function(config){
		new Builder().initialize(config).compile(program.compress, program.bare);
});

program
	.command('watch [config]')
	.description('watch js and css source files and compile changes')
	.action(function(config){
		new Builder().initialize(config).watch(program.compress, program.bare);
});
 
program
	.command('deploy [config]')
	.description('compile compressed js and css sources')
	.action(function(config){
		new Builder().initialize(config).debug();
});

program
	.command('test')
	.description('test')
	.action(function(config){
		console.log(process.platform);
		// new Builder().initialize(config).debug();
});

program.parse(process.argv);